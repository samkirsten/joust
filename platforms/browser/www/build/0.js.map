{"version":3,"sources":["../../src/pages/game-joined/game-joined.module.ts","../../src/pages/game-joined/game-joined.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GameJoinedPage } from './game-joined';\n\n@NgModule({\n  declarations: [\n    GameJoinedPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GameJoinedPage),\n  ],\n})\nexport class GameJoinedPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game-joined/game-joined.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { Socket } from 'ng-socket-io';\nimport { Observable } from 'rxjs/Observable';\nimport { DeviceMotion, DeviceMotionAccelerationData } from '@ionic-native/device-motion';\n\n/**\n * Class for the GameJoinedPage page. Handles the game play for a client, and\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n    selector: 'page-game-joined',\n    templateUrl: 'game-joined.html',\n})\nexport class GameJoinedPage {\n\n    messages = [];\n    gameId = '';\n    user = '';\n    host = false;\n    status = 'Ready to Play';\n\n    motionController = null;\n\n    constructor(public navCtrl: NavController, public navParams: NavParams, private socket: Socket, private toastCtrl: ToastController, private deviceMotion: DeviceMotion) {\n\n        this.gameId = this.navParams.get('gameId');\n        this.user = this.navParams.get('user');\n        this.host = this.navParams.get('host');\n\n        this.startGame().subscribe(message => {\n            this.messages.push(\"game started\");\n            this.startCountdown();\n        });\n\n        this.endGame().subscribe(message => {\n            this.messages.push(\"game ended\");\n        });\n\n        // Get the device current acceleration\n        //this.deviceMotion.getCurrentAcceleration().then(\n        //    (acceleration: DeviceMotionAccelerationData) => console.log(acceleration),\n        //    (error: any) => console.log(error)\n        //);\n\n        // Watch device acceleration\n        this.motionController = this.deviceMotion.watchAcceleration().subscribe((acceleration: DeviceMotionAccelerationData) => {\n            console.log(acceleration);\n        });\n\n        // Stop watch\n        //subscription.unsubscribe();\n\n    }\n\n    startGame() {\n        //this.motionController = this.deviceMotion.watchAcceleration().subscribe((acceleration: DeviceMotionAccelerationData) => {\n        //    console.log(acceleration);\n        //});\n        let observable = new Observable(observer => {\n            this.socket.on('game-started', (data) => {\n                observer.next(data);\n            });\n        });\n        return observable;\n    }\n\n    endGame() {\n        let observable = new Observable(observer => {\n            this.socket.on('game-over', (data) => {\n                observer.next(data);\n            });\n        });\n        return observable;\n    }\n\n    startCountdown() {\n        let time = 5;\n        var me = this;\n        let timer = setInterval(function(){\n            time--;\n            me.status = time.toString();\n            if(time <= 0) {\n                clearInterval(timer);\n                me.gameStarted();\n            }\n        },1000);\n    }\n\n    gameStarted() {\n        this.status = 'Game Started'\n    }\n\n    playerMoved() {\n        this.socket.emit('user-moved', { room: this.gameId, user: this.user });\n        this.status = \"game over\";\n    }\n\n    ionViewWillLeave() {\n        this.socket.disconnect();\n    }\n\n    showToast(msg) {\n        let toast = this.toastCtrl.create({\n            message: msg,\n            duration: 2000\n        });\n        toast.present();\n    }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game-joined/game-joined.ts"],"sourceRoot":""}